## 第6章 时钟中断
操作系统面临 性能和控制权的问题
### 1，性能问题，为了避免某一个程序完全控制系统,让其他程序难以运行，操作系统采用受限制的操作，

1 基本思路,t提供不同的模式，用户模式，内核模式
用户模式不能完全访问机器的资源，
内核模式可以完全访问系统的；，如果用户模式需要完全访问机器资源骂他智能陷入内核，也就是 用户态和内核态的切换；
用户把程序计数器保存到内核栈，然后内核模式执行系统调用，的调用完内核栈恢复子村企，返回用户模式

2，控制权问题
操作系统不会把所有控制权交给程序， 通过启动一个时间中断程序，中断当前进程，讲进程的寄存器保存到对应的进程结构，然后恢复另一个进程的结构，放到内核栈，
就像刚刚所说的内核态用户态切换，切换基于进程调度算法

#### 新的问题
 如果在处理一个中断时，发生了另一个中断，一般会使用加锁的方式
 
 ## 第7章 进程调度
 进程调度是指在操作系统发生时钟中断时，如何调度运行其他的进程
 
 第一个 性能指标： T周转时间=T完成时间-T到达时间
 
 在性能指标考量下，FIFO ,SJF 最短时间优先(在假设所有任务同时到达的情况下)，STCF(根据最短完成时间 ，抢占式),   STCF 很满足周转时间这个指标

 第二个 性能指标 T响应时间=T首次运行-T到达时间
  RR  时间片轮转 (时间片用完就切换另一个进程，时间片一般时时钟中断的倍数，时间片太短会导致进程切换太频繁，影响整体性能， 太长又会影响相应性能)
 提示：进程山下文切换慢，除了保存和恢复寄存器外，还有cpu缓存，和tlb（内存映射）缓存的刷新，分支预测器（这个不太懂） 刷新；
 
####  T周转时间 和 T周转时间 不能兼得


 ## 第8，9章 多级反馈队列 和 比例份额
 多级反馈队列的基本原理，内部维护多个有优先级的队列，一级队列有个时间片，运行完之后就到低优先级，操作系统始终运行最高优先级的任务，为了避免饥饿问题，经过一段时间会将所有任务提升到最高优先级
 
 #### 新的问题 配置多少队列。每一层队列配置多少时间片， 这个鱼和熊掌不能兼得的问题 就是”巫毒常量“
